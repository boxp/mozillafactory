/**
 *
 * Constants
 *
 */



/*
 * general variable
 */
$base-path: "http://saneyuki.mozlabs.jp/factory";

$link-color: #af3232;
$text-color-primary: #333;
$base-font-size: 14px;
$base-font-family: 'Open Sans',
                   "ヒラギノ角ゴ ProN W3", "Hiragino Kaku Gothic ProN",
                   メイリオ, Meiryo, sans-serif;
$base-line-height: 1.6em;

$body-bg-color: #f5f1e8;

$basic-block-bg-color: mix($body-bg-color, #fff);

$page-width: 980px;
$page-width-phone: 95%;

$post-padding-phone: 5%;


/*
 * header-nav variable
 */
$header-nav-item-number: 5;
$header-nav-item-width: $page-width / $header-nav-item-number;

$header-nav-margin-tablet: 1%;
$header-nav-width-tablet: 100% - $header-nav-margin-tablet * 2;
$header-nav-item-width-tablet: $header-nav-width-tablet / $header-nav-item-number;
$header-nav-item-fontsize-tablet: 12px;

/*
 * sidebar variable
 */
$sidebar-width: 180px;
$sidebar-banner-width-phone: 40%;

$sidebar-margin-left: 30px;

$sidebar-width-tablet: 20%;

$sidebar-based-main-width: $page-width - $sidebar-width;
$nav-based-main-width: ($header-nav-item-number - 1) * $header-nav-item-width;

$banner-border: 1px dotted $text-color-primary;


/* ページ幅からサイドバー幅を差し引いた長さよりも
   グローバルナビゲーションのアイテム数を使って算出した長さの方が長い場合、
   ページ幅から算出したサイドバー幅を優先する */
$main-width: 0;
@if $sidebar-based-main-width < $nav-based-main-width {
  $main-width: $sidebar-based-main-width;
}
@else {
  $main-width: $nav-based-main-width;
}

$main-width-tablet: 80%;

$post-width: $main-width * 0.8;
$post-width-phone-wide: 80%;
$post-maxwidth-phone-wide: 550px;
$post-width-tablet: 100%;
$post-maxwidth-tablet: 100%;

/*
 * お問い合わせフォーム埋め込みiframe
 */
/* iframeの高さ。余裕を見て「これなら大丈夫だろう」という値を決め打ち */
$contact-form-frame-height: 900px;

/*
 * post index variable
 */
$post-index-padding-width: 15px;
$post-index-border-width: 0;
$post-index-margin-width: 10px;
$post-index-font-size: 12px;


/*
 * footer variable
 */
$footer-bg-color: #fff;


/*
 * tag variable
 */
$tag-fallback-bg-color: #000;
$tag-project-bg-color: #7f7f7f;
$tag-news-bg-color: #960000;
$tag-mentor-bg-color: #bfb31b;
$tag-event-bg-color: #f9b439;
$tag-mozbus-bg-color: #8bcd43;
$tag-webmaker-bg-color: #8bcd43;
$tag-mechamozilla-bg-color: #8bcd43;
$tag-buttobi-bg-color: #8bcd43;
$tag-openlifemap-bg-color: #8bcd43;
$tag-workshoptools-bg-color: #8bcd43;
$tag-education-bg-color: #2a7286;
$tag-design-bg-color: #8a72aa;
$tag-physicalweb-bg-color: #6abad0;
$tag-spare-bg-color: #f88e11;


/**
 *
 * Mixins
 *
 */
@mixin transition($transition: all linear .25s) {
  -webkit-transition: $transition;
  -o-transition: $transition;
  transition: $transition;
}

@mixin transform($transform) {
  -o-transform: $transform;
  -ms-transform: $transform;
  -webkit-transform: $transform;
  transform: $transform;
}

@mixin box-shadow($shadow: 0px 2px 0px 0px rgba(0, 0, 0, 0.1)) {
  -webkit-box-shadow: $shadow;
  box-shadow: $shadow;
}

@mixin embeded-line-bottom($op1: .2, $op2: .3) {
  border-bottom: 1px solid rgb(0, 0, 0);
  border-bottom: 1px solid rgba(0, 0, 0, $op1);
  @include box-shadow(rgba(255, 255, 255, $op2)0 1px 0);
}
/* #posts.index .post::after に指定するだけのmixin */
@mixin simple-linear-gradient-for-post-index () {
  $top: rgba($basic-block-bg-color, 0);
  $top-percent: 10%;
  $bottom: $basic-block-bg-color;
  $bottom-percent: 100%;

  background: -webkit-gradient(linear, left top, left bottom, color-stop(22%,rgba(255,255,255,1)), color-stop(99%,rgba(0,0,0,1))); /* Chrome,Safari4+ */
  background: -webkit-linear-gradient(top, $top $top-percent, $bottom $bottom-percent); /* Chrome10+,Safari5.1+ */
  background: -o-linear-gradient(top, $top $top-percent, $bottom $bottom-percent); /* Opera 11.10+ */
  background: -ms-linear-gradient(top, $top $top-percent, $bottom $bottom-percent); /* IE10+ */
  background: linear-gradient(to bottom, $top $top-percent, $bottom $bottom-percent); /* W3C */
  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='$top', endColorstr='$bottom',GradientType=0 ); /* IE6-9 */
}

%clear-embeded-line-bottom {
  border-bottom: none;
  @include box-shadow(none);
}

/* Use @mixin instead of @extend.
 * @extending an outer selector from within @media is deprecated in Sass 3.2.
 */
@mixin no-linebreak() {
  display: inline-block;
}

%clear-float {
  content: "";
  display: block;
  clear: both;
}

%basic-block {
  background: $basic-block-bg-color;
  @include box-shadow( 0px 0px 5px 1px rgba(0, 0, 0, .1) );
}

@mixin grid-column-width($box-number, $parent-width, $padding-width, $border-width, $margin-width) {
  /*
   * // 個々の要素に必要なborderとpadding
   * $x = (個々の要素のborder*2 + padding*2) * 個々の要素の行数;
   * // 相殺分を考慮したmargin
   * $y = 要素間margin *（要素の行数 - 1）
   *
   * 個々の要素の幅 = (親の幅 - ( $x + $y) ) / 要素の行数;
   */
  $x: 2 * ($padding-width + $border-width) * $box-number;
  $y: $margin-width * ($box-number - 1);
  //width: ( $parent-width - ($x + $y) ) / $box-number;
  width: 28%; // for IE8 support
  padding: $padding-width;
  margin-left: $margin-width;

  &:nth-of-type(3n+1) {
    margin-left: 0;

    @include phone {
      margin-left: auto;
    }
    @include tablet {
      margin-left: $margin-width;
    }
  }

  @include phone {
    width: auto;
    padding-left: auto;
    padding-right: auto;
    margin-left: auto;
    margin-right: auto;
  }
  @include tablet {
    &:nth-of-type(2n+1) {
      margin-left: 0;
    }
  }
}

@mixin open-sans() {
  @font-face {
      font-family: 'Open Sans';
      src: url('#{$base-path}/fonts/OpenSans-Regular-webfont.eot');
      src: url('#{$base-path}/fonts/OpenSans-Regular-webfont.eot?#iefix') format('embedded-opentype'),
           url('#{$base-path}/fonts/OpenSans-Regular-webfont.woff') format('woff'),
           url('#{$base-path}/fonts/OpenSans-Regular-webfont.ttf') format('truetype'),
           url('#{$base-path}/fonts/OpenSans-Regular-webfont.svg#OpenSansRegular') format('svg');
      font-weight: normal;
      font-style: normal;
  }

  @font-face {
      font-family: 'Open Sans';
      src: url('#{$base-path}/fonts/OpenSans-Italic-webfont.eot');
      src: url('#{$base-path}/fonts/OpenSans-Italic-webfont.eot?#iefix') format('embedded-opentype'),
           url('#{$base-path}/fonts/OpenSans-Italic-webfont.woff') format('woff'),
           url('#{$base-path}/fonts/OpenSans-Italic-webfont.ttf') format('truetype'),
           url('#{$base-path}/fonts/OpenSans-Italic-webfont.svg#OpenSansRegular') format('svg');
      font-weight: normal;
      font-style: italic;
  }

  @font-face {
      font-family: 'Open Sans';
      src: url('#{$base-path}/fonts/OpenSans-Semibold-webfont.eot');
      src: url('#{$base-path}/fonts/OpenSans-Semibold-webfont.eot?#iefix') format('embedded-opentype'),
           url('#{$base-path}/fonts/OpenSans-Semibold-webfont.woff') format('woff'),
           url('#{$base-path}/fonts/OpenSans-Semibold-webfont.ttf') format('truetype'),
           url('#{$base-path}/fonts/OpenSans-Semibold-webfont.svg#OpenSansSemibold') format('svg');
      font-weight: bold;
      font-style: normal;
  }

  @font-face {
      font-family: 'Open Sans';
      src: url('#{$base-path}/fonts/OpenSans-Semibold-webfont.eot');
      src: url('#{$base-path}/fonts/OpenSans-Semibold-webfont.eot?#iefix') format('embedded-opentype'),
           url('#{$base-path}/fonts/OpenSans-Semibold-webfont.woff') format('woff'),
           url('#{$base-path}/fonts/OpenSans-Semibold-webfont.ttf') format('truetype'),
           url('#{$base-path}/fonts/OpenSans-Semibold-webfont.svg#OpenSansSemibold') format('svg');
      font-weight: bold;
      font-style: italic;
  }

}


/*
 * Media Queries
 *
 * # Breakpoints
 *
 * |      |  phone-wide |            |
 * |      |-------------|            |
 * |      phone         |   tablet   |
 * |--------------------|------------|---Desktop---...
 * |           mobile                |
 *
 */
$mq-tablet-max-wide: 1082px - 1px;
$mq-tablet-min-wide: 768px;
$mq-phone-max-wide: $mq-tablet-min-wide - 1px;
$mq-phone-wide-min-wide: 480px;

@mixin phone {
  @media only screen and (max-width: $mq-phone-max-wide) {
    @content;
  }
}

@mixin phone-wide {
  @media only screen and (min-width: $mq-phone-wide-min-wide) and (max-width: $mq-phone-max-wide) {
    @content;
  }
}

@mixin tablet {
  @media only screen and (min-width: $mq-tablet-min-wide) and (max-width: $mq-tablet-max-wide) {
    @content;
  }
}

@mixin mobile {
  @media only screen and (max-width: $mq-tablet-max-wide) {
    @content;
  }
}
